{% extends "index.html" %}
{% block content %}
{# Switch between forms if the user clicks on link #}
{% if page == 'sign_in' %}
    <h2>Log In</h2>
    <form action="/sign_in" method="POST" enctype="application/x-www-form-urlencoded">
        <input type="text" name="username" placeholder="Username" required><br>
        <input type="password" name="password" placeholder="Password" required><br>
        <input type="submit" value="Sign In">
    </form>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for m in messages %}
                <p>{{m}}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <a href="{{ url_for('account', action='sign_up') }}">Don't have an account? Sign up</a>    
{% elif page == 'sign_up' %}
    <h2>Create Account</h2>
    <form action="/sign_up" method="POST" enctype="application/x-www-form-urlencoded">
        <input type="text" name="username" placeholder="Username" required minlength="4" maxlength="20"><br>
        <input type="password" name="password" placeholder="Password" id="password" required minlength="3"><br>
        <input type="password" name="confirm_password" placeholder="Confirm Password" required minlength="3" id="confirm_password" oninput="confirm(this)"><br>
        <script language="javascript">
            function confirm(input) {
                if (input.value != document.getElementById("password").value) {
                    input.setCustomValidity("Passwords do not match")
                } else {
                    input.setCustomValidity("")
                }
            }
        </script>
        <input type="submit" value="Create Account">
    </form>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for m in messages %}
                <p>{{m}}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <a href="{{ url_for('account', action='sign_in') }}">Already have an account? Sign in</a>    
{% endif %}
{% endblock %}  